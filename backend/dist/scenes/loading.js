// Generated by CoffeeScript 1.10.0
(function() {
  Crafty.scene('Loading', function() {
    var loading, x;
    loading = Crafty.e('2D, Grid, DOM, Text, Delay').text('Loading...').attr({
      w: Game.width()
    }).at(0, 5).textFont(Game.loadingFont).textColor(Game.textColor).css(Game.centerCss);
    Crafty.e('Actor, Progress, Text').at(Game.map_grid.width / 2 - 2, 8).textFont(Game.loadingFont).textColor(Game.textColor).text('0%');
    x = 3;
    Crafty.load(Game.preLoadAssets, function() {
      loading.delay((function() {
        if (x >= 22) {
          Crafty('flower Loading').destroy();
          x = 3;
        }
        Crafty.e('2D, DOM, Grid, flower, Loading').at(x, 10);
        x += 2;
      }), 500, -1);
    });
    Crafty.load(Game.assets, (function() {
      Game.endless = false;
      Crafty.scene('MainMenu');
    }), function(progress) {
      Crafty('Progress').text(Math.floor(progress.percent) + '%');
    });
  });

}).call(this);
