// Generated by CoffeeScript 1.10.0
(function() {
  Crafty.scene('MainMenu', function() {
    var loadButton, savegame;
    Crafty.background('rgb(169, 153, 145)');
    Crafty.audio.stop();
    Crafty.audio.play('Menu', -1);
    Crafty.e('2D, DOM, Image').image('assets/ftd-logo.jpg').attr({
      x: 80,
      y: Game.height() * 1 / 12 - 24,
      w: Game.width(),
      h: 200
    });
    savegame = Crafty.storage('ftd_save1');
    loadButton = Crafty.e('DOMButton').text('Load Saved game').attr({
      x: 0,
      y: Game.height() * 7 / 12 - 24,
      w: Game.width(),
      h: 50,
      tooltipWidth: 350
    });
    if (savegame) {
      loadButton.tooltip('Continue the game you played last time ' + 'with difficulty ' + savegame.difficulty + ' ' + 'on wave ' + savegame.currentWave).bind('Click', function() {
        Game.difficulty = savegame.difficulty || 'Normal';
        Game.money = savegame.money;
        Game.lifes = savegame.lifes;
        Game.moneyAfterWave = savegame.moneyAfterWave;
        Game.towers = savegame.towers;
        Game.level = savegame.level || '2';
        Game.backgroundAsset = savegame.backgroundAsset || 'background1';
        Game.waves.current = savegame.waves.current || Game.waves.level2;
        Game.endless = savegame.currentWave >= Game.waves.current.length;
        Game.enemyCount = savegame.enemyCount;
        Game.currentWave = savegame.currentWave;
        Game.selectedTower = savegame.selectedTower;
        Game.sniperTowerInitial = savegame.sniperTowerInitial;
        Game.towerMap = savegame.towerMap;
        Game.path = new Path(Game.map_grid);
        Game.path.copy(savegame.path);
        Crafty.scene('Game');
      });
    } else {
      loadButton.tooltip('No savegame exists yet.').disable();
    }
    Crafty.e('DOMButton').text('Start new game').attr({
      x: 0,
      y: Game.height() * 9 / 12 - 24,
      w: Game.width(),
      h: 50
    }).tooltip('Starts a new game. You can select the difficulty on the next screen.').bind('Click', function() {});
    if (Crafty.storage('ftd_save1') && !confirm('Starting a new game will overwrite your already saved game. Continue?')) {
      return;
    }
    Crafty.scene('Difficulty');
    return;
    Crafty.e('DOMButton').text('Instructions').attr({
      x: 70,
      y: Game.height() - 50,
      w: 200,
      h: 50
    }).tooltip('Click here for some instructions').bind('Click', function() {});
    Crafty.scene('Help', 'MainMenu');
    return;
    Crafty.e('DOMButton').text('Credits').attr({
      x: 280,
      y: Game.height() - 50,
      w: 200,
      h: 50
    }).tooltip('View the credits for this game ^^').bind('Click', function() {});
    Crafty.scene('Credits', 'MainMenu');
    return;
    Crafty.e('SoundButton').attr({
      x: 470,
      y: Game.height() - 50,
      w: 200,
      h: 50
    });
  });

}).call(this);
